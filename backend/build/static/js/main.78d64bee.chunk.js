(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{47:function(e,t,c){},48:function(e,t,c){},52:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},64:function(e,t,c){},68:function(e,t,c){"use strict";c.r(t),c.d(t,"history",(function(){return xe}));var a=c(2),n=c(17),r=c.n(n),s=(c(47),c(26)),j=(c(48),c(69)),i=c(1),l=function(e){var t=e.frames,c=function(e){return null!==t[e]||void 0!==t[e]?t[e]:""};return Object(i.jsxs)("tbody",{className:"text-center",children:[Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:"1"}),Object(i.jsx)("td",{children:c(0)}),Object(i.jsx)("td",{children:c(1)}),Object(i.jsx)("td",{children:"-"})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:"2"}),Object(i.jsx)("td",{children:c(2)}),Object(i.jsx)("td",{children:c(3)}),Object(i.jsx)("td",{children:"-"})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:"3"}),Object(i.jsx)("td",{children:c(4)}),Object(i.jsx)("td",{children:c(5)}),Object(i.jsx)("td",{children:"-"})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:"4"}),Object(i.jsx)("td",{children:c(6)}),Object(i.jsx)("td",{children:c(7)}),Object(i.jsx)("td",{children:"-"})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:"5"}),Object(i.jsx)("td",{children:c(8)}),Object(i.jsx)("td",{children:c(9)}),Object(i.jsx)("td",{children:"-"})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:"6"}),Object(i.jsx)("td",{children:c(10)}),Object(i.jsx)("td",{children:c(11)}),Object(i.jsx)("td",{children:"-"})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:"7"}),Object(i.jsx)("td",{children:c(12)}),Object(i.jsx)("td",{children:c(13)}),Object(i.jsx)("td",{children:"-"})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:"8"}),Object(i.jsx)("td",{children:c(14)}),Object(i.jsx)("td",{children:c(15)}),Object(i.jsx)("td",{children:"-"})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:"9"}),Object(i.jsx)("td",{children:c(16)}),Object(i.jsx)("td",{children:c(17)}),Object(i.jsx)("td",{children:"-"})]}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:"10"}),Object(i.jsx)("td",{children:c(18)}),Object(i.jsx)("td",{children:c(19)}),Object(i.jsx)("td",{children:c(20)})]})]})},o=function(e){var t=e.frames;return Object(i.jsx)("div",{children:t&&t.length>0&&Object(i.jsxs)(j.a,{"data-testid":"scoreboard",children:[Object(i.jsx)("thead",{className:"text-center",children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Frames"}),Object(i.jsx)("th",{children:"Throw 1"}),Object(i.jsx)("th",{children:"Throw 2"}),Object(i.jsx)("th",{children:"Throw 3"})]})}),Object(i.jsx)(l,{frames:t})]})})},d=c(18),b=c(70),O=(c(52),function(e){var t=e.activeButtons,c=e.handleThrow,a=e.playerName,n=function(e){c(parseInt(e.target.id))};return Object(i.jsx)("div",{children:t>0&&Object(d.a)(Array(t)).map((function(e,t){return Object(i.jsx)(b.a,{className:"numberButton",color:"secondary","data-testid":a+t,id:t,onClick:n,children:t},t)}))})}),h=c(10),u=c(12),m=c(11),x=function(e,t,c,a){e({type:"SAVE_WINNER",data:{name:a?c.name:"DRAW",matchID:parseInt(t)}})},f=function(e,t){var c={};return Object.values(t).map((function(e){c[e]={score:0,frame:[]}})),Object(m.a)({},e,c)},p=function(e,t){var c=Object(u.d)(),n=Object(a.useState)(11),r=Object(h.a)(n,2),s=r[0],j=r[1],i=Object(a.useState)([]),l=Object(h.a)(i,2),o=l[0],b=l[1],O=Object(a.useState)(1),m=Object(h.a)(O,2),x=m[0],f=m[1],p=function(){20===x&&10==o[x-2]&&j(11),21===x&&(o[x-2]+o[x-3]===10||10===o[x-3]?j(11):j(null)),22===x&&j(null)};return Object(a.useEffect)((function(){x>19&&p(),o.length>0&&null===s&&function(e,t,c,a){e({type:"SAVE_FRAME_COMPLETED",data:{matchID:t,name:c,frameCompleted:a}})}(c,t,e,!0),function(e,t,c,a){e({type:"ADD_FRAME_TO_GAME",data:{matchID:t,name:c,frame:a}})}(c,t,e,o)}),[x,o,s]),{activeButtons:s,frames:o,handleThrow:function e(t){j(x%2==0?11:11-t),b((function(e){return[].concat(Object(d.a)(e),[t])})),f((function(e){return e+1})),10===t&&x<19&&e(0)},handleScore:function(a){!function(e,t,c,a){e({type:"SAVE_SCORE",data:{matchID:t,name:c,score:a}})}(c,t,e,a)}}},v=c(71),g=c(72),y=c(73),N=c(74),w=function(e){for(var t=Object(d.a)(e),c=0;c<t.length;c++)10==t[c]&&0==t[c+1]&&(t[c+1]="x");return t=t.filter((function(e){return"x"!=e}))},S=function(e){var t=w(e),c=0,a=0;if(t.length>0){for(var n=0;n<10;n++)if(10===t[c]){if(t[c+1]&&t[c+2]){a+=10+t[c+1]+t[c+2],c++;continue}}else t[c]+t[c+1]===10?t[c]&&t[c+1]&&t[c+2]&&(a+=t[c]+t[c+1]+t[c+2],c+=2):t[c+1]&&(a+=t[c]+t[c+1],c+=2);return a}},E=function(e){var t=e.frames,c=e.onTotalScore,n=e.playerName,r=Object(a.useState)(0),s=Object(h.a)(r,2),j=s[0],l=s[1];return Object(a.useEffect)((function(){l(S(t)),c(j)}),[t,j]),Object(i.jsx)("div",{children:Object(i.jsxs)("h4",{"data-testid":n+"_score",children:["Total Score: ",j||0]})})},C=function(e){var t=e.playerName,c=e.matchID,a=p(t,c),n=a.activeButtons,r=a.frames,s=a.handleThrow,j=a.handleScore;return Object(i.jsxs)(v.a,{className:"mt-4",children:[Object(i.jsx)(g.a,{children:Object(i.jsxs)("h4",{children:["Player: ",t]})}),Object(i.jsxs)(y.a,{className:"text-center",children:[Object(i.jsx)(o,{frames:r}),Object(i.jsx)(O,{activeButtons:n,handleThrow:s,playerName:t})]}),Object(i.jsx)(N.a,{children:Object(i.jsx)(E,{frames:r,onTotalScore:j,playerName:t})})]})},D=function(e){var t=[];if(Object.keys(e).map((function(c){t.push({name:c,score:e[c].score,frame:e[c].frame})})),function(e){return e.every((function(t){return t.score===e[0].score}))}(t))return{result:"Game is Tied"};var c=function(e){return e.reduce((function(e,t){return e.score>t.score?e:t}))}(t);return c.result="".concat(c.name," has won the game with ").concat(c.score," points."),c},I=function(e,t,c){var n=Object(a.useState)(!1),r=Object(h.a)(n,2),s=r[0],j=r[1],i=Object(a.useState)({}),l=Object(h.a)(i,2),o=l[0],d=l[1],b=Object(u.d)(),O=Object(u.e)((function(e){return e.bowlingReducer.game[t]}));return Object(a.useEffect)((function(){var e;e=O,Object.keys(e).length>0&&!Object.keys(e).includes("winner")&&Object.keys(e).every((function(t){return e[t].frameCompleted}))&&j(!0)}),[O]),Object(a.useEffect)((function(){s&&d(D(O,e))}),[s]),Object(a.useEffect)((function(){o.hasOwnProperty("result")&&(o.name?x(b,t,o,!0):x(b,t,o,!1))}),[o]),{modal:s,winner:o,toggle:function(){return j(!s)},handleSave:function(){c()}}},P=c(89),A=c(75),_=c(76),T=c(77),k=function(e){var t=e.heading,c=e.description,a=e.onHandleToggle,n=e.modal,r=e.onSave,s=e.showSave,j=e.children,l=function(){a()};return Object(i.jsxs)(P.a,{isOpen:n,toggle:l,children:[Object(i.jsx)(A.a,{toggle:l,children:t}),c&&Object(i.jsx)(_.a,{children:c}),Object(i.jsx)(_.a,{children:j}),Object(i.jsxs)(T.a,{children:[Object(i.jsx)(b.a,{color:"secondary",onClick:l,"data-testid":"CloseModal",children:"Close"}),s&&Object(i.jsx)(b.a,{color:"primary",onClick:function(){r(),a()},"data-testid":"SaveModal",children:"Save"})]})]})},R=function(e){var t=e.playerNames,c=e.matchID,a=e.onGameResultSave,n=I(t,c,a),r=n.modal,s=n.winner,j=n.toggle,l=n.handleSave;return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"mt-3 text-center",children:s.hasOwnProperty("result")&&!r?Object(i.jsx)("div",{className:"text-center mt-2",children:Object(i.jsx)("p",{className:"text-info",children:s.result})}):""}),Object(i.jsx)(k,{modal:r,onHandleToggle:j,heading:"Result",onSave:l,showSave:!0,children:s.result?Object(i.jsx)("div",{children:s.result}):""})]})},M=(c(61),c(78)),B=c(79),F=c(80),L=c(81),V=c(82),G=(c(62),function(e){var t,c,a=e.showButtons,n=Object(s.e)(),r=function(e){"back"===e.target.id?n.goBack():n.push("/")};return Object(i.jsx)("div",{children:Object(i.jsxs)(M.a,{color:"primary",dark:!0,className:a?"":"justify-content-center",children:[Object(i.jsx)(B.a,(t={className:"mr-auto nav-button",navbar:!0},Object(m.a)(t,"className","ps-3"),Object(m.a)(t,"children",Object(i.jsx)(F.a,{children:a&&Object(i.jsx)(L.a,{id:"back",onClick:r,children:"Back"})})),t)),Object(i.jsx)(V.a,{children:"Bowling Arena"}),Object(i.jsx)(B.a,(c={className:"mr-auto nav-button",navbar:!0},Object(m.a)(c,"className","pe-3"),Object(m.a)(c,"children",Object(i.jsx)(F.a,{children:a&&Object(i.jsx)(L.a,{id:"home",onClick:r,children:"Home"})})),c))]})})}),H=function(){var e=Object(u.e)((function(e){return e.bowlingReducer})),t=e.matchID,c=e.playerNames;return Object(i.jsxs)("div",{children:[Object(i.jsx)(G,{showButtons:!0}),Object(i.jsxs)("div",{className:"application",children:[Object(i.jsx)("div",{className:"",children:Object(i.jsxs)("h4",{className:"text-center",children:["Match ID: ",t]})}),Object(i.jsxs)("div",{children:[Object(i.jsx)(R,{name:c,matchID:t,onGameResultSave:function(){fetch("/api/bowling/add",{method:"POST",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log("Res",e.data)}))}}),Object(i.jsx)("div",{children:c.map((function(e){return Object(i.jsx)("div",{children:Object(i.jsx)(C,{playerName:e,matchID:t})},e)}))})]})]})]})},W=(c(64),function(){var e=Object(s.e)(),t=function(t){"play"===t.target.id?e.push("/PlayerCountSelector"):e.push("/history")};return Object(i.jsxs)("div",{children:[Object(i.jsx)(G,{showButtons:!1}),Object(i.jsx)("div",{className:"application",children:Object(i.jsxs)("div",{className:"text-center",children:[Object(i.jsx)("h1",{children:"Welcome to Bowling Arena"}),Object(i.jsx)("div",{className:"d-grid gap-2 mt-5",children:Object(i.jsx)(b.a,{size:"lg",id:"play",onClick:t,color:"primary",children:"Let's Play!"})}),Object(i.jsx)("div",{children:"or"}),Object(i.jsx)("div",{className:"d-grid gap-2 mt-2",children:Object(i.jsx)(b.a,{size:"lg",id:"history",onClick:t,color:"primary",children:"Check History"})})]})})]})}),Y=c(83),z=c(84),J=c(85),U=c(86),X=c(87),q=c(7),K=function(e,t){for(var c={},a=1;a<=t;a++)e.hasOwnProperty("Player".concat(a))||(c["Player".concat(a)]="Please enter Player".concat(a," name"));var n=Object.values(e);return new Set(n).size!==n.length&&n.length===t&&(c.duplicates="Please enter unique name for all the Players"),c},Q=function(){var e=Object(s.e)(),t=Object(a.useState)({}),c=Object(h.a)(t,2),n=c[0],r=c[1],j=Object(a.useState)([]),i=Object(h.a)(j,2),l=i[0],o=i[1],d=Object(u.e)((function(e){return e.bowlingReducer.playerCount})),b=Object(u.d)();Object(a.useEffect)((function(){d||e.push("/PlayerCountSelector")}),[e,d]);return{handleChange:function(e){o(Object(q.a)(Object(q.a)({},l),{},Object(m.a)({},e.target.id,e.target.value.trim())))},handleSubmit:function(t){t.preventDefault();var c=K(l,d);if(0===Object.keys(c).length){var a=function(e){var t=Math.round(Math.random()*Math.random()*1e6).toString();return function(e,t){e({type:"SAVE_MATCH_ID",data:t})}(e,t),t}(b);!function(e,t){e({type:"PLAYER_NAMES",data:Object.values(t)})}(b,l),function(e,t,c){e({type:"SAVE_INITAL_GAME",data:f(t,c)})}(b,a,l),e.push("/GameHome")}else r(Object(q.a)({},c))},errors:n,playerNames:l,playerCount:d}},Z=function(){var e=Q(),t=e.handleSubmit,c=e.errors,a=e.handleChange,n=e.playerCount;return Object(i.jsxs)("div",{children:[Object(i.jsx)(G,{showButtons:!0}),Object(i.jsxs)("div",{className:"application",children:[Object(i.jsx)("h2",{className:"text-center",children:"Please enter the Player Names:"}),Object(i.jsxs)(Y.a,{onSubmit:t,children:[Object(d.a)(Array(n)).map((function(e,t){return Object(i.jsxs)(z.a,{className:"mt-3",children:[Object(i.jsx)(J.a,{for:"Player"+(t+1),className:"text-left ps-1",children:"Player "+(t+1)}),Object(i.jsx)(U.a,{className:"mt-1  text-secondary",invalid:!!c.hasOwnProperty(["Player"+(t+1)]),id:"Player"+(t+1),onChange:function(e){return a(e)}}),c.hasOwnProperty(["Player"+(t+1)])&&Object(i.jsx)(X.a,{children:c["Player"+(t+1)]})]},t)})),c.hasOwnProperty("duplicates")?Object(i.jsx)("p",{className:"text-danger",children:c.duplicates}):"",Object(i.jsx)("div",{className:"d-grid gap-2 mt-4",children:Object(i.jsx)(b.a,{className:"text-center",color:"primary",type:"submit",children:"Submit"})})]})]})]})},$=c(88),ee=function(){var e=Object(s.e)(),t=Object(a.useState)(null),c=Object(h.a)(t,2),n=c[0],r=c[1],j=Object(u.d)();return Object(a.useEffect)((function(){!function(e,t){e({type:"PLAYER_COUNT",data:t})}(j,n),n>1&&e.push("/PlayerNameForm")}),[n,j,e]),Object(i.jsxs)("div",{children:[Object(i.jsx)(G,{showButtons:!0}),Object(i.jsxs)("div",{className:"application",children:[Object(i.jsx)("h2",{className:"text-center",children:"Please select the number of players playing."}),Object(i.jsxs)($.a,{className:"d-grid gap-2 mt-4",children:[Object(i.jsx)(b.a,{color:"primary",block:!0,onClick:function(){return r(2)},active:2===n,children:"Two"}),Object(i.jsx)(b.a,{color:"primary",block:!0,onClick:function(){return r(3)},active:3===n,children:"Three"}),Object(i.jsx)(b.a,{color:"primary",block:!0,onClick:function(){return r(4)},active:4===n,children:"Four"})]})]})]})},te=c(32),ce=c.n(te),ae=c(40),ne=function(e){var t=e.game,c=Object(a.useState)(!1),n=Object(h.a)(c,2),r=n[0],s=n[1],j=Object(a.useState)(""),l=Object(h.a)(j,2),d=l[0],b=l[1];return Object(i.jsxs)("div",{children:[Object.values(t.playerNames).map((function(e,c){return Object(i.jsxs)("div",{className:0!==c?"text-start mt-4":"text-start",children:[Object(i.jsxs)("h6",{children:["Player: ",e]}),Object(i.jsxs)("div",{children:["Score : ",t.match[e].score]}),Object(i.jsxs)("div",{children:["Frame :",Object(i.jsx)("a",{"data-testid":e+c,onClick:function(t){return function(e){b(e),s(!0)}(e)},className:"link-info",children:"Click to see frame data"})]})]},e)})),""!==d&&Object(i.jsx)(k,{heading:"Frames for "+d,modal:r,onHandleToggle:function(){return s(!r)},children:Object(i.jsx)(o,{frames:t.match[d].frame})})]})},re=function(e){var t=e.game;return Object(i.jsx)("div",{children:Object(i.jsxs)(v.a,{className:"mt-4",children:[Object(i.jsxs)(g.a,{children:[Object(i.jsxs)("h6",{children:["Match ID: ",t.matchID]}),"DRAW"===t.match.winner?Object(i.jsx)("h5",{children:"Game was a Draw"}):Object(i.jsxs)("h4",{children:["Winner: ",t.match.winner]})]}),Object(i.jsx)(y.a,{className:"text-center",children:Object(i.jsx)(ne,{game:t})})]})})},se=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),c=t[0],n=t[1],r=Object(a.useState)(!1),s=Object(h.a)(r,2),j=s[0],l=s[1];return Object(a.useEffect)(Object(ae.a)(ce.a.mark((function e(){var t;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/bowling/get").then((function(e){return e.json()})).then((function(e){return e}));case 3:t=e.sent,n(t),l(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]),Object(i.jsxs)("div",{children:[Object(i.jsx)(G,{showButtons:!0}),Object(i.jsx)("div",{className:"application",children:j&&Object(i.jsx)("div",{children:c&&c.length>0?c.map((function(e){return Object(i.jsx)(re,{game:e.game},e._id)})):Object(i.jsx)("h4",{className:"text-center mt-4",children:"No History Identified"})})}),!j&&Object(i.jsx)("div",{className:"text-center",children:"Loading"})]})};var je=function(){return Object(i.jsx)("div",{children:Object(i.jsxs)(s.c,{children:[Object(i.jsx)(s.a,{exact:!0,path:"/",component:W}),Object(i.jsx)(s.a,{exact:!0,path:"/PlayerCountSelector",component:ee}),Object(i.jsx)(s.a,{exact:!0,path:"/PlayerNameForm",component:Z}),Object(i.jsx)(s.a,{exact:!0,path:"/GameHome",component:H}),Object(i.jsx)(s.a,{exact:!0,path:"/history",component:se})]})})},ie=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,90)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),r(e),s(e)}))},le=(c(66),c(20)),oe=c(41),de=c(15),be=c(39),Oe=c(27),he={playerCount:null,playerNames:{},game:{},matchID:null},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PLAYER_COUNT":return Object(q.a)(Object(q.a)({},e),{},{playerCount:t.data});case"PLAYER_NAMES":return Object(q.a)(Object(q.a)({},e),{},{playerNames:t.data});case"SAVE_MATCH_ID":return Object(q.a)(Object(q.a)({},e),{},{matchID:t.data});case"SAVE_INITAL_GAME":return Object(q.a)(Object(q.a)({},e),{},{game:t.data});case"ADD_FRAME_TO_GAME":return Object(q.a)(Object(q.a)({},e),{},{game:Object(q.a)(Object(q.a)({},e.game),{},Object(m.a)({},t.data.matchID,Object(q.a)(Object(q.a)({},e.game[[t.data.matchID]]),{},Object(m.a)({},t.data.name,Object(q.a)(Object(q.a)({},e.game[t.data.matchID][t.data.name]),{},{frame:t.data.frame})))))});case"SAVE_FRAME_COMPLETED":return Object(q.a)(Object(q.a)({},e),{},{game:Object(q.a)(Object(q.a)({},e.game),{},Object(m.a)({},t.data.matchID,Object(q.a)(Object(q.a)({},e.game[[t.data.matchID]]),{},Object(m.a)({},t.data.name,Object(q.a)(Object(q.a)({},e.game[t.data.matchID][t.data.name]),{},{frameCompleted:t.data.frameCompleted})))))});case"SAVE_SCORE":return Object(q.a)(Object(q.a)({},e),{},{game:Object(q.a)(Object(q.a)({},e.game),{},Object(m.a)({},t.data.matchID,Object(q.a)(Object(q.a)({},e.game[[t.data.matchID]]),{},Object(m.a)({},t.data.name,Object(q.a)(Object(q.a)({},e.game[t.data.matchID][t.data.name]),{},{score:t.data.score})))))});case"SAVE_WINNER":return Object(q.a)(Object(q.a)({},e),{},{game:Object(q.a)(Object(q.a)({},e.game),{},Object(m.a)({},t.data.matchID,Object(q.a)(Object(q.a)({},e.game[t.data.matchID]),{},{winner:t.data.name})))});default:return e}},me=function(e){return Object(le.b)({router:Object(Oe.b)(e),bowlingReducer:ue})},xe=Object(de.a)(),fe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||le.c,pe=Object(le.d)(me(xe),fe(Object(le.a)(oe.a,Object(be.a)(xe))));r.a.render(Object(i.jsx)(u.a,{store:pe,children:Object(i.jsx)(Oe.a,{history:xe,children:Object(i.jsx)(je,{})})}),document.getElementById("root")),ie()}},[[68,1,2]]]);
//# sourceMappingURL=main.78d64bee.chunk.js.map